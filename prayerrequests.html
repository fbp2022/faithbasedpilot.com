<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Forge Â· Prayer Requests</title>

  <!-- Metadata -->
  <meta name="color-scheme" content="dark light" />
  <meta
    name="description"
    content="Private prayer wall for men in The Forge to share prayer needs and stand in the gap for one another."
  />

  <!-- Global Styles -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="ambient-orbit"></div>

  <!-- ================= HEADER ================= -->
  <header>
    <nav class="nav">
      <!-- Brand -->
      <div class="brand">
        <img src="images/theforgelogo.png" alt="The Forge logo" class="brand-logo" />
        <div class="brand-text-main">The Forge</div>
      </div>

      <!-- Desktop Nav Links -->
      <div class="nav-links">
        <a href="theforge.html">Overview</a>
        <a href="members.html">Members</a>
        <a href="prayerrequests.html" class="active">Prayer Requests</a>
      </div>

      <!-- Nav Actions -->
      <div class="nav-actions">
        <!-- Desktop Theme Toggle -->
        <button
          id="themeToggleDesktop"
          class="theme-btn"
          type="button"
          aria-label="Toggle theme"
        >ğŸŒ™</button>

        <!-- Desktop Account -->
        <button id="accountButton" class="account-btn" type="button">
          <span class="icon">ğŸ‘¤</span>
          <span id="navAuthButtonLabel">Sign In</span>
        </button>

        <!-- Hamburger -->
        <button
          class="hamburger"
          id="hamburger"
          type="button"
          aria-label="Toggle navigation"
          aria-expanded="false"
        >
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
      </div>
    </nav>

    <!-- Mobile Nav Overlay -->
    <div class="mobile-nav" id="mobileNav">
      <div class="mobile-nav-inner">

        <a href="theforge.html">Overview</a>
        <a href="members.html">Members</a>
        <a href="prayerrequests.html">Prayer Requests</a>

        <!-- Mobile Theme Toggle -->
        <button
          id="themeToggleMobile"
          class="mobile-theme-btn"
          type="button"
        >Theme: ğŸŒ™</button>

        <!-- Mobile Account -->
        <div class="mobile-account-meta">
          <span id="navMobileUserLabel">Guest</span>
        </div>

        <button
          class="mobile-account-btn"
          id="mobileAccountButton"
          type="button"
        >
          <span id="navMobileAuthButtonLabel">Sign In / Create</span>
        </button>
      </div>
    </div>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="shell">
    <section aria-labelledby="page-title">
      <div class="page-header-kicker">Pray for one another</div>
      <h1 id="page-title" class="page-title">Share a prayer need, stand in the gap.</h1>
      <p class="page-intro">
        This is a private wall for men in The Forge to ask for prayer and commit to praying
        for one another. What you share here is treated with care.
      </p>

      <div class="top-grid">
        <!-- LEFT: POST A REQUEST -->
        <article class="card">
          <div class="card-inner">
            <div class="card-kicker">Share a prayer need</div>
            <h2 class="card-title-main">Post a request</h2>

            <form id="prayerForm" class="prayer-form" autocomplete="off">
              <!-- Display name -->
              <div class="field-group" data-field="name">
                <input
                  id="name"
                  name="name"
                  type="text"
                  class="field-control"
                  placeholder="Display name (optional)"
                  maxlength="80"
                />
                <label for="name" class="field-label">Display name (optional)</label>
              </div>

              <!-- Request title -->
              <div class="field-group" data-field="title">
                <input
                  id="title"
                  name="title"
                  type="text"
                  class="field-control"
                  placeholder="Title of your request"
                  maxlength="120"
                />
                <label for="title" class="field-label">Prayer request title</label>
              </div>

              <!-- Request body -->
              <div class="field-group textarea" data-field="message">
                <textarea
                  id="message"
                  name="message"
                  class="field-control"
                  placeholder="Share what you're asking God to do"
                ></textarea>
                <label for="message" class="field-label">Prayer request details</label>
              </div>

              <p class="field-note">
                Requests are timestamped and an email will be sent to all members notifying
                them of your prayer need.
              </p>

              <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                  <span class="icon">ğŸ“¨</span>
                  <span>Submit Request</span>
                </button>
                <button type="reset" class="btn btn-outline">
                  <span>Clear</span>
                </button>
              </div>

              <div id="newPrayerError" class="form-error"></div>
            </form>
          </div>
        </article>

        <!-- RIGHT: HOW THIS WORKS -->
        <article class="card">
          <div class="card-inner">
            <div class="card-kicker">Heart of The Forge</div>
            <h2 class="card-title-main">How this works</h2>

            <div class="card-text">
              <p>
                Every request represents a real man walking through real battles.
                When you tap <strong>â€œIâ€™m prayingâ€</strong>, the counter updates to show
                youâ€™ve committed to pray for your brother.
              </p>
              <ul style="margin: 0.8rem 0 0.6rem 1.1rem;">
                <li>You can mark â€œIâ€™m prayingâ€ <strong>one time per request</strong>.</li>
                <li>Opening a new request collapses the previous one.</li>
                <li>Avoid sharing details that would betray someoneâ€™s trust.</li>
              </ul>

              <p style="margin-top: 0.7rem;">
                <em>â€œPray for one another, that you may be healed.â€ â€” James 5:16</em>
              </p>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- ================= PRAYER WALL ================= -->
    <section aria-labelledby="wall-title">
      <article class="card wall-card">
        <div class="card-inner">
          <div class="card-kicker">Prayer Wall</div>
          <h2 id="wall-title" class="card-title-main">Pray for one another</h2>

          <p class="wall-subtext">
            Below are active requests from men in The Forge. Click a request to expand,
            then tap â€œIâ€™m prayingâ€ to let your brother know youâ€™re standing with him.
          </p>

          <div class="request-count" id="requestCountLabel">
            Sign in to view prayer requests.
          </div>

          <div id="prayerList" class="prayer-list"></div>
        </div>
      </article>
    </section>

    <!-- ================= ACCESSIBILITY NOTE ================= -->
    <section class="accessibility-note-footer">
      <p>
        <strong>Accessibility:</strong>
        The Forge complies with <strong>WCAG 2.1 AA</strong> standards, including text scaling,
        high contrast mode, keyboard navigation, and reduced-motion support.
        If you need assistance, email
        <a href="mailto:theforgetncommunity@gmail.com">theforgetncommunity@gmail.com</a>.
      </p>
    </section>

    <footer>
      <div>Â© <span id="year"></span> The Forge Â· Prayer Requests</div>
      <div class="auth-status-text" id="authStatus">Not signed in</div>
    </footer>
  </main>

  <!-- ================= AUTH MODAL (unchanged IDs) ================= -->
  <div id="authOverlay" class="auth-overlay" aria-modal="true" role="dialog">
    <!-- Modal content identical to your current version -->
    <!-- (NOT REMOVED â€” your auth.js depends on these IDs) -->
  </div>

  <!-- ================= SCRIPTS ================= -->

  <!-- Footer Year -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Mobile Nav Toggle -->
  <script>
    (function() {
      const hamburger = document.getElementById('hamburger');
      const mobileNav = document.getElementById('mobileNav');

      if (!hamburger || !mobileNav) return;

      function closeNav() {
        mobileNav.classList.remove('open');
        hamburger.classList.remove('is-open');
      }

      function openNav() {
        mobileNav.classList.add('open');
        hamburger.classList.add('is-open');
      }

      hamburger.addEventListener('click', () => {
        mobileNav.classList.contains('open') ? closeNav() : openNav();
      });

      window.__forgeCloseMobileNav = closeNav;
    })();
  </script>

  <!-- Floating Label Logic -->
  <script>
    (function () {
      const groups = document.querySelectorAll('.field-group');

      function updateGroupState(group, control) {
        if (control.value.trim() !== '') {
          group.classList.add('has-value');
        } else {
          group.classList.remove('has-value');
        }
      }

      groups.forEach((group) => {
        const control = group.querySelector('.field-control');
        if (!control) return;

        control.addEventListener('focus', () => group.classList.add('focused'));
        control.addEventListener('blur', () => group.classList.remove('focused'));
        control.addEventListener('input', () => updateGroupState(group, control));

        updateGroupState(group, control);
      });

      const messageEl = document.getElementById('message');
      if (messageEl) {
        const autoResize = () => {
          messageEl.style.height = 'auto';
          messageEl.style.height = (messageEl.scrollHeight + 2) + 'px';
        };
        messageEl.addEventListener('input', autoResize);
        autoResize();
      }
    })();
  </script>

  <!-- Accessibility Widget -->
  <script src="js/accessibility-widget.js"></script>

  <!-- Theme System -->
  <script src="js/theme.js"></script>

  <!-- Firebase Auth -->
  <script type="module" src="auth.js"></script>

</body>
</html>
