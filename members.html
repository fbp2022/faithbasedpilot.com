<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Forge ¬∑ Members</title>
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="Private members list for The Forge men‚Äôs community." />

<style>
  /* ================== BASE / THEME ================== */
  :root {
    --bg-main: #05070f;
    --bg-elevated: rgba(10, 14, 30, 0.95);
    --bg-card: rgba(9, 14, 32, 0.95);
    --bg-card-soft: rgba(18, 24, 48, 0.9);
    --bg-deep: #000000;

    --bg-header-strong: rgba(0, 0, 0, 0.9);
    --bg-header-soft: rgba(0, 0, 0, 0.7);
    --bg-mobile-overlay: rgba(2, 4, 10, 0.97);

    --border-subtle: rgba(0, 255, 200, 0.25);
    --accent: #00ffd0;
    --accent-soft: rgba(0, 255, 200, 0.5);
    --accent-alt: #00aaff;

    --text-main: #e3f6ff;
    --text-muted: #c2d6f0;
    --text-soft: #9ab0d1;
    --danger: #ff4b4b;

    --shadow-strong: 0 0 35px rgba(0, 0, 0, 0.9);
    --shadow-accent: 0 0 24px rgba(0, 255, 200, 0.45);

    --nav-height: 64px;
    --radius-lg: 18px;
    --radius-md: 12px;
    --radius-full: 999px;
    --transition-fast: 0.18s ease;
    --transition-med: 0.25s ease;
  }

  :root[data-theme="light"] {
    --bg-main: #f5f7fb;
    --bg-elevated: rgba(255, 255, 255, 0.98);
    --bg-card: rgba(255, 255, 255, 0.98);
    --bg-card-soft: rgba(245, 247, 252, 0.98);
    --bg-deep: #c7d2fe;

    --bg-header-strong: rgba(255, 255, 255, 0.98);
    --bg-header-soft: rgba(248, 250, 252, 0.9);
    --bg-mobile-overlay: rgba(245, 247, 252, 0.98);

    --border-subtle: rgba(0, 140, 255, 0.25);
    --accent: #0074ff;
    --accent-soft: rgba(0, 116, 255, 0.5);
    --accent-alt: #00b8ff;

    --text-main: #071420;
    --text-muted: #334155;
    --text-soft: #64748b;
  }

  :root[data-contrast="high"] {
    --bg-main: #000000;
    --bg-card: #050810;
    --bg-card-soft: #070b18;
    --text-main: #ffffff;
    --text-muted: #f3f4f6;
    --text-soft: #d1d5db;
    --accent: #00ffd0;
    --accent-alt: #00c4ff;
    --accent-soft: rgba(0, 255, 208, 0.75);
    --border-subtle: rgba(255, 255, 255, 0.5);
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html,
  body {
    height: 100%;
    scroll-behavior: smooth;
  }

  html {
    /* base font size will be adjusted by accessibility toolbar */
    font-size: 100%;
  }

  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: radial-gradient(
      circle at 0% 0%,
      var(--bg-card-soft) 0,
      var(--bg-main) 40%,
      var(--bg-deep) 100%
    );
    color: var(--text-main);
    -webkit-font-smoothing: antialiased;
    padding-top: var(--nav-height); /* Push page content below fixed header */
  }

  body.reduce-motion * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }

  /* Ambient animated background */
  .ambient-orbit {
    position: fixed;
    inset: -40%;
    pointer-events: none;
    z-index: -1;
    background:
      radial-gradient(circle at 10% 0%, rgba(0, 255, 200, 0.16), transparent 55%),
      radial-gradient(circle at 100% 100%, rgba(0, 140, 255, 0.18), transparent 60%);
    opacity: 0.75;
    animation: orbit 30s linear infinite alternate;
    mix-blend-mode: screen;
  }

  @keyframes orbit {
    0% {
      transform: translate3d(0, 0, 0) scale(1);
    }
    50% {
      transform: translate3d(-3%, 4%, 0) scale(1.05);
    }
    100% {
      transform: translate3d(3%, -4%, 0) scale(1.02);
    }
  }

  .shell {
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 1.5rem 3.5rem;
  }

  /* ===== SKIP LINK FOR KEYBOARD/SCREEN READERS ===== */
  .skip-link {
    position: absolute;
    left: -999px;
    top: 0.5rem;
    z-index: 100;
    padding: 0.5rem 0.9rem;
    border-radius: var(--radius-full);
    background: var(--bg-card);
    color: var(--text-main);
    border: 1px solid var(--accent-soft);
    text-decoration: none;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
  }

  .skip-link:focus {
    left: 50%;
    transform: translateX(-50%);
    outline: 2px solid var(--accent);
    outline-offset: 3px;
  }

  /* ===== GLOBAL FOCUS STYLES ===== */
  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 3px;
  }

  /* Body links: ensure clear indication (WCAG 1.4.1) */
  main a {
    text-decoration: underline;
  }

  .btn,
  .nav-links a,
  .mobile-nav-inner a,
  .mobile-theme-toggle,
  .card a.btn {
    text-decoration: none;
  }

  /* ================== ACCESSIBILITY NOTE ================== */
  .accessibility-note {
    margin: 0 0 1.6rem;
    padding: 0.75rem 1rem;
    border-radius: var(--radius-md);
    background: var(--bg-card-soft);
    border: 2px solid var(--accent-soft);
    font-size: 0.86rem;
    line-height: 1.6;
    color: var(--text-muted);
  }

  .accessibility-note strong {
    color: var(--text-main);
  }

  /* ================== ACCESSIBILITY TOOLBAR ================== */
  .accessibility-toolbar {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    z-index: 60;
    max-width: 320px;
  }

  /* Launcher button (floating) */
  .a11y-launcher {
    width: 44px;
    height: 44px;
    border-radius: 999px;
    border: 1px solid var(--border-subtle);
    background: var(--bg-card);
    color: var(--text-muted);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.3rem;
    box-shadow: var(--shadow-strong);
    transition:
      background var(--transition-fast),
      color var(--transition-fast),
      box-shadow var(--transition-fast),
      transform var(--transition-fast);
  }

  .a11y-launcher:hover {
    background: var(--bg-card-soft);
    color: var(--accent);
    transform: translateY(-1px);
    box-shadow: 0 0 18px rgba(0, 255, 200, 0.45);
  }

  /* Popover panel */
  .accessibility-toolbar-inner {
    display: none;
    margin-bottom: 0.4rem;
    padding: 0.6rem 0.9rem;
    border-radius: var(--radius-lg);
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    box-shadow: var(--shadow-strong);
    font-size: 0.8rem;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
  }

  /* When widget is open, show the panel */
  .accessibility-toolbar.open .accessibility-toolbar-inner {
    display: flex;
  }

  .accessibility-toolbar-label {
    font-weight: 600;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-soft);
    white-space: nowrap;
  }

  .a11y-button-group {
    display: inline-flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-left: auto;
  }

  .a11y-btn {
    border-radius: var(--radius-full);
    border: 1px solid var(--border-subtle);
    padding: 0.25rem 0.7rem;
    background: var(--bg-elevated);
    color: var(--text-muted);
    cursor: pointer;
    font-size: 0.76rem;
    text-transform: uppercase;
    letter-spacing: 0.13em;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    transition:
      background var(--transition-fast),
      border-color var(--transition-fast),
      color var(--transition-fast),
      transform var(--transition-fast);
  }

  .a11y-btn:hover {
    background: var(--bg-card-soft);
    border-color: var(--accent-soft);
    color: var(--text-main);
    transform: translateY(-1px);
  }

  .a11y-btn[aria-pressed="true"] {
    background: radial-gradient(circle at 0 0, var(--accent), var(--accent-alt));
    color: #020409;
    border-color: transparent;
  }

  .a11y-btn span.icon {
    font-size: 0.9rem;
  }

  @media (max-width: 700px) {
    .accessibility-toolbar {
      bottom: 0.75rem;
      right: 0.75rem;
    }
    .accessibility-toolbar-inner {
      max-width: 260px;
    }
  }

  /* ===== FIXED HEADER ON ALL DEVICES ===== */
  header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    backdrop-filter: blur(16px);
    background: linear-gradient(
      to bottom,
      var(--bg-header-strong),
      var(--bg-header-soft),
      transparent
    );
    border-bottom: 1px solid var(--border-subtle);
  }

  .nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: var(--nav-height);
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 1.5rem;
    gap: 1.5rem;
  }

  .brand {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    white-space: nowrap;
  }

  .brand-logo {
    width: 40px;
    height: 40px;
    border-radius: 999px;
    object-fit: cover;
    border: 1px solid rgba(248, 250, 252, 0.5);
    box-shadow:
      0 0 0 1px rgba(15, 23, 42, 0.9),
      0 12px 30px rgba(0, 0, 0, 0.7);
    background: radial-gradient(circle at 30% 30%, #facc15, #f97316);
  }

  .brand-text-main {
    font-size: 1rem;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    font-weight: 600;
    color: var(--text-main);
  }

  .brand-text-sub {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--text-soft);
  }

  .nav-links {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
  }

  .nav-links a {
    text-decoration: none;
    color: var(--text-muted);
    position: relative;
    padding-bottom: 0.15rem;
    cursor: pointer;
    transition: color var(--transition-fast);
  }

  .nav-links a::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    width: 0;
    height: 2px;
    border-radius: 999px;
    background: linear-gradient(90deg, var(--accent), var(--accent-alt));
    transition: width var(--transition-fast);
  }

  .nav-links a:hover {
    color: var(--text-main);
  }

  .nav-links a:hover::after,
  .nav-links a:focus-visible::after {
    width: 100%;
  }

  .nav-actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  /* ================== THEME TOGGLE (DESKTOP BUTTON) ================== */
  .theme-toggle-btn {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    border: 1px solid var(--border-subtle);
    background: var(--bg-elevated);
    color: var(--text-muted);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    padding: 0;
    font-size: 1.1rem;
    box-shadow: 0 0 16px rgba(0, 0, 0, 0.7);
    transition:
      background var(--transition-fast),
      color var(--transition-fast),
      box-shadow var(--transition-fast),
      transform var(--transition-fast),
      border-color var(--transition-fast);
  }

  .theme-toggle-btn:hover {
    background: var(--bg-card-soft);
    color: var(--accent);
    border-color: var(--accent-soft);
    transform: translateY(-1px);
    box-shadow: 0 0 20px rgba(0, 255, 200, 0.35);
  }

  .theme-toggle-btn:active {
    transform: translateY(0);
    box-shadow: 0 0 12px rgba(0, 255, 200, 0.25);
  }

  .theme-icon {
    display: block;
    line-height: 1;
  }

  /* Default (dark): show moon, hide sun */
  .theme-icon-sun {
    display: none;
  }

  :root[data-theme="light"] .theme-icon-moon {
    display: none;
  }

  :root[data-theme="light"] .theme-icon-sun {
    display: block;
  }

  /* Hamburger (mobile) */
  .hamburger {
    display: none;
    width: 40px;
    height: 34px;
    border-radius: 999px;
    border: 1px solid var(--border-subtle);
    background: var(--bg-elevated);
    cursor: pointer;
    align-items: center;
    justify-content: center;
    gap: 4px;
    flex-direction: column;
    padding: 6px 0;
    transition:
      background var(--transition-fast),
      box-shadow var(--transition-fast),
      transform var(--transition-fast);
  }

  .hamburger-line {
    width: 18px;
    height: 2px;
    border-radius: 999px;
    background: var(--text-muted);
    transition:
      transform var(--transition-fast),
      opacity var(--transition-fast),
      background var(--transition-fast);
  }

  .hamburger:hover {
    background: var(--bg-card-soft);
    box-shadow: 0 0 15px rgba(0, 255, 200, 0.35);
    transform: translateY(-1px);
  }

  .hamburger.is-open .hamburger-line:nth-child(1) {
    transform: translateY(4px) rotate(45deg);
    background: var(--accent);
  }

  .hamburger.is-open .hamburger-line:nth-child(2) {
    opacity: 0;
  }

  .hamburger.is-open .hamburger-line:nth-child(3) {
    transform: translateY(-4px) rotate(-45deg);
    background: var(--accent);
  }

  /* Mobile nav overlay */
  .mobile-nav {
    display: none;
    position: fixed;
    inset: var(--nav-height) 0 0 0;
    background:
      radial-gradient(circle at 0 0, rgba(0, 255, 200, 0.16), transparent 60%),
      radial-gradient(circle at 100% 100%, rgba(0, 140, 255, 0.18), transparent 60%),
      var(--bg-mobile-overlay);
    backdrop-filter: blur(20px);
    z-index: 35;
  }

  .mobile-nav.open {
    display: block;
  }

  .mobile-nav-inner {
    max-width: 1120px;
    margin: 0 auto;
    padding: 1.25rem 1.5rem 2rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .mobile-nav-inner a {
    text-decoration: none;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--text-muted);
    padding: 0.6rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    cursor: pointer;
    transition: color var(--transition-fast), border-color var(--transition-fast);
    background: transparent;
    text-align: left;
  }

  .mobile-nav-inner a:last-of-type {
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  }

  .mobile-nav-inner a:hover {
    color: var(--accent);
    border-color: rgba(0, 255, 200, 0.5);
  }

  /* Mobile theme toggle (inside hamburger menu, bottom) */
  .mobile-theme-toggle {
    margin-top: 0.9rem;
    padding: 0.8rem 0;
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.12);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.6rem;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--text-muted);
    background: transparent;
    cursor: pointer;
  }

  .mobile-theme-toggle span.mobile-theme-label {
    flex: 1;
    text-align: left;
  }

  .mobile-theme-toggle span.mobile-theme-icon {
    font-size: 1.1rem;
  }

  .mobile-theme-toggle:hover {
    color: var(--accent);
    border-top-color: var(--accent-soft);
  }

  @media (max-width: 840px) {
    .nav-links {
      display: none;
    }

    .hamburger {
      display: flex;
    }

    /* Hide desktop theme button on mobile */
    .theme-toggle-btn {
      display: none;
    }
  }

  /* ================== HERO ================== */

  main {
    padding-top: 2.4rem; /* breathing room below header */
  }

  .hero {
    margin: 2.4rem 0 2.5rem;
    display: grid;
    grid-template-columns: minmax(0, 3.2fr) minmax(0, 2.8fr);
    gap: 2.25rem;
    align-items: center;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    padding: 0.2rem 0.75rem 0.2rem 0.25rem;
    border-radius: 999px;
    background: radial-gradient(circle at 0 0, rgba(0, 255, 200, 0.3), transparent 70%);
    border: 1px solid var(--border-subtle);
    box-shadow: 0 0 18px rgba(0, 255, 200, 0.25);
    margin-bottom: 1.1rem;
  }

  .hero-badge-label {
    padding: 0.25rem 0.6rem;
    border-radius: 999px;
    background: linear-gradient(135deg, var(--accent), var(--accent-alt));
    color: #020409;
    font-size: 0.6rem;
    font-weight: 600;
    letter-spacing: 0.13em;
    text-transform: uppercase;
  }

  .hero-badge-text {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--text-soft);
  }

  .hero-title {
    font-size: clamp(2.3rem, 4vw, 3rem);
    line-height: 1.1;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 0.75rem;
    color: var(--text-main);
    text-shadow: 0 0 18px rgba(0, 255, 200, 0.4);
  }

  .hero-subtitle {
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.25em;
    color: var(--text-soft);
    margin-bottom: 1.4rem;
  }

  .hero-text {
    font-size: 0.98rem;
    color: var(--text-muted);
    line-height: 1.7;
    margin-bottom: 1.2rem;
  }

  .hero-scripture {
    font-size: 0.85rem;
    color: var(--text-soft);
    border-left: 2px solid var(--accent-soft);
    padding-left: 0.75rem;
    margin-bottom: 1.7rem;
  }

  .hero-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    align-items: center;
  }

  .btn {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.45rem;
    padding: 0.7rem 1.6rem;
    border-radius: var(--radius-full);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    border: 1px solid var(--border-subtle);
    cursor: pointer;
    text-decoration: none;
    transition:
      transform var(--transition-fast),
      box-shadow var(--transition-fast),
      background var(--transition-fast),
      border-color var(--transition-fast),
      color var(--transition-fast);
  }

  .btn-primary {
    background: radial-gradient(circle at 0 0, var(--accent), var(--accent-alt));
    color: #020409;
    box-shadow: var(--shadow-accent);
    border-color: transparent;
  }

  .btn-outline {
    background: var(--bg-elevated);
    color: var(--text-main);
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 22px rgba(0, 255, 200, 0.4);
  }

  .btn:active {
    transform: translateY(0);
    box-shadow: 0 0 10px rgba(0, 255, 200, 0.3);
  }

  .btn span.icon {
    font-size: 1rem;
  }

  /* Right hero card (hologram panel) */

  .hero-panel {
    position: relative;
    border-radius: var(--radius-lg);
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    padding: 1.5rem 1.3rem;
    box-shadow: var(--shadow-strong);
    overflow: hidden;
  }

  .hero-panel-glow {
    position: absolute;
    inset: -40%;
    background:
      radial-gradient(circle at 10% 0%, rgba(0, 255, 200, 0.2), transparent 60%),
      radial-gradient(circle at 90% 100%, rgba(0, 140, 255, 0.18), transparent 65%);
    pointer-events: none;
    mix-blend-mode: screen;
    opacity: 0.75;
  }

  .hero-panel-content {
    position: relative;
    z-index: 1;
  }

  .hero-panel-heading {
    font-size: 0.85rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-soft);
    margin-bottom: 0.4rem;
  }

  .hero-panel-title {
    font-size: 1.05rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--text-main);
    margin-bottom: 0.9rem;
  }

  .hero-panel-text {
    font-size: 0.9rem;
    color: var(--text-muted);
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  .hero-panel-meta {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.75rem;
    font-size: 0.8rem;
    color: var(--text-soft);
  }

  .hero-panel-meta-item {
    padding: 0.5rem 0.65rem;
    border-radius: 12px;
    background: var(--bg-card-soft);
    border: 1px solid rgba(0, 255, 200, 0.18);
  }

  .meta-label {
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--text-soft);
    margin-bottom: 0.15rem;
  }

  .meta-value {
    font-size: 0.85rem;
    color: var(--text-main);
  }

  /* ================== GENERIC SECTIONS ================== */

  .section {
    margin-bottom: 2.75rem;
  }

  .section-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 0.75rem;
    margin-bottom: 1.25rem;
  }

  .section-kicker {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.22em;
    color: var(--text-soft);
    margin-bottom: 0.25rem;
  }

  .section-title {
    font-size: 1.35rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-main);
  }

  .section-subtitle {
    font-size: 0.85rem;
    color: var(--text-muted);
    max-width: 360px;
  }

  .card-grid {
    display: grid;
    grid-template-columns: minmax(0, 3fr) minmax(0, 2.5fr);
    gap: 1.75rem;
  }

  .card {
    border-radius: var(--radius-lg);
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    padding: 1.5rem 1.35rem;
    box-shadow: var(--shadow-strong);
    transition:
      transform var(--transition-med),
      box-shadow var(--transition-med),
      border-color var(--transition-med),
      background var(--transition-med);
  }

  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 0 26px rgba(0, 255, 200, 0.35);
    border-color: var(--accent-soft);
  }

  .card-title {
    font-size: 1rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 0.65rem;
    color: var(--text-main);
  }

  .card-text {
    font-size: 0.96rem;
    color: var(--text-muted);
    line-height: 1.7;
    margin-bottom: 0.6rem;
  }

  .card-list {
    list-style: none;
    margin-top: 0.4rem;
  }

  .card-list li {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    font-size: 0.93rem;
    color: var(--text-muted);
    margin-bottom: 0.4rem;
  }

  .card-list-bullet {
    width: 5px;
    height: 5px;
    border-radius: 999px;
    background: var(--accent-soft);
    margin-top: 0.45rem;
    flex-shrink: 0;
  }

  .scripture-ref {
    font-size: 0.85rem;
    color: var(--text-soft);
    margin-top: 0.5rem;
  }

  /* ================== BELIEFS SECTION ================== */

  .belief-intro {
    font-size: 0.96rem;
    color: var(--text-muted);
    line-height: 1.7;
    margin-bottom: 1.1rem;
  }

  .beliefs-grid {
    display: grid;
    grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.8fr);
    gap: 1.75rem;
  }

  .beliefs-list {
    border-radius: var(--radius-lg);
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    padding: 1.4rem 1.35rem;
    box-shadow: var(--shadow-strong);
  }

  .belief-item {
    margin-bottom: 0.9rem;
    padding-bottom: 0.7rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  }

  .belief-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
  }

  .belief-item h3 {
    font-size: 0.95rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 0.35rem;
    color: var(--text-main);
  }

  .belief-item p {
    font-size: 0.92rem;
    color: var(--text-muted);
    line-height: 1.6;
  }

  /* ================== RULES ================== */

  .rules-list {
    list-style: none;
  }

  .rules-list li {
    display: grid;
    grid-template-columns: auto minmax(0, 1fr);
    align-items: flex-start;
    gap: 0.65rem;
    font-size: 0.93rem;
    color: var(--text-muted);
    padding: 0.5rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  }

  .rules-list li:last-child {
    border-bottom: none;
  }

  .rule-number {
    width: 1.8rem;
    height: 1.8rem;
    border-radius: 999px;
    border: 1px solid var(--border-subtle);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    color: var(--text-soft);
  }

  .rule-content strong {
    color: var(--text-main);
  }

  .notice {
    margin-top: 0.9rem;
    font-size: 0.85rem;
    color: var(--danger);
  }

  /* ================== JOIN / CONTACT ================== */

  .join-note {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-top: 0.6rem;
  }

  .contact-grid {
    display: grid;
    grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.6fr);
    gap: 1.75rem;
  }

  .contact-form {
    display: grid;
    gap: 1.1rem;
    font-size: 0.9rem;
  }

  .field {
    display: grid;
    gap: 0.3rem;
  }

  .field label {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--text-soft);
  }

  .field input,
  .field textarea {
    border-radius: 12px;
    border: 1px solid var(--border-subtle);
    background: var(--bg-elevated);
    color: var(--text-main);
    padding: 0.55rem 0.75rem;
    font-size: 0.9rem;
    outline: none;
    min-height: 2.4rem;
    resize: none;
  }

  .field textarea {
    min-height: 6rem;
    overflow-y: hidden;
  }

  .field .cf-turnstile {
    margin-top: 0.35rem;
  }

  :root[data-theme="light"] .field input,
  :root[data-theme="light"] .field textarea {
    background: #ffffff;
  }

  .field input:focus,
  .field textarea:focus {
    border-color: var(--accent-soft);
    box-shadow: 0 0 10px rgba(0, 255, 200, 0.3);
  }

  .contact-meta {
    font-size: 0.93rem;
    color: var(--text-muted);
    line-height: 1.7;
  }

  .contact-meta p + p {
    margin-top: 0.7rem;
  }

  .contact-meta strong {
    color: var(--text-main);
  }

  footer {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    font-size: 0.8rem;
    color: var(--text-soft);
    display: flex;
    justify-content: space-between;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  .auth-status-text {
    font-size: 0.78rem;
    color: var(--text-soft);
  }

  /* ================== AUTH MODAL (UI ONLY, NO FIREBASE) ================== */

  .auth-overlay {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at 0 0, rgba(0,0,0,0.65), rgba(0,0,0,0.92));
    backdrop-filter: blur(18px);
    z-index: 999;
  }

  .auth-overlay.open {
    display: flex;
  }

  .auth-card {
    width: 100%;
    max-width: 420px;
    border-radius: 18px;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    box-shadow: 0 0 30px rgba(0,0,0,0.9);
    padding: 1.4rem 1.4rem 1.2rem;
    color: var(--text-main);
    position: relative;
    overflow: hidden;
  }

  .auth-card::before {
    content: "";
    position: absolute;
    inset: -40%;
    background:
      radial-gradient(circle at 10% 0, rgba(0,255,200,0.2), transparent 65%),
      radial-gradient(circle at 100% 100%, rgba(0,140,255,0.25), transparent 70%);
    mix-blend-mode: screen;
    opacity: 0.7;
    pointer-events: none;
  }

  .auth-card-inner {
    position: relative;
    z-index: 1;
  }

  .auth-card-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
  }

  .auth-card-title {
    font-size: 1rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
  }

  .auth-card-sub {
    font-size: 0.78rem;
    color: var(--text-soft);
    max-width: 230px;
    text-align: right;
  }

  .auth-close-btn {
    position: absolute;
    top: 0.6rem;
    right: 0.7rem;
    border: none;
    background: transparent;
    color: var(--text-soft);
    cursor: pointer;
    font-size: 1rem;
    padding: 0.2rem;
  }

  .auth-toggle-row {
    display: flex;
    border-radius: 999px;
    border: 1px solid var(--border-subtle);
    overflow: hidden;
    margin-bottom: 0.8rem;
    font-size: 0.76rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
  }

  .auth-toggle-btn {
    flex: 1;
    padding: 0.45rem 0.3rem;
    text-align: center;
    cursor: pointer;
    background: transparent;
    border: none;
    color: var(--text-soft);
  }

  .auth-toggle-btn.active {
    background: radial-gradient(circle at 0 0, var(--accent), var(--accent-alt));
    color: #020409;
    font-weight: 600;
  }

  .auth-form {
    display: grid;
    gap: 0.55rem;
    margin-bottom: 0.6rem;
  }

  .auth-field {
    display: grid;
    gap: 0.25rem;
  }

  .auth-label {
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 0.13em;
    color: var(--text-soft);
  }

  .auth-input {
    border-radius: 10px;
    border: 1px solid var(--border-subtle);
    background: var(--bg-elevated);
    padding: 0.5rem 0.7rem;
    font-size: 0.9rem;
    color: var(--text-main);
    outline: none;
  }

  :root[data-theme="light"] .auth-input {
    background: #ffffff;
    color: var(--text-main);
  }

  .auth-input:focus {
    border-color: var(--accent-soft);
    box-shadow: 0 0 12px rgba(0,255,200,0.45);
  }

  .auth-btn {
    margin-top: 0.5rem;
    width: 100%;
    border-radius: 999px;
    border: none;
    padding: 0.55rem;
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    background: radial-gradient(circle at 0 0, var(--accent), var(--accent-alt));
    color: #020409;
    cursor: pointer;
    box-shadow: 0 0 18px rgba(0,255,200,0.5);
  }

  .auth-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 0 24px rgba(0,255,200,0.7);
  }

  .auth-error {
    font-size: 0.78rem;
    color: var(--danger);
    min-height: 1em;
    margin-top: 0.2rem;
  }

  .auth-footnote {
    margin-top: 0.4rem;
    font-size: 0.74rem;
    color: var(--text-soft);
  }

  /* ================== RESPONSIVE ================== */

  @media (max-width: 880px) {
    .hero {
      grid-template-columns: minmax(0, 1fr);
    }

    .hero-panel {
      order: -1;
    }

    .card-grid {
      grid-template-columns: minmax(0, 1fr);
    }

    .beliefs-grid {
      grid-template-columns: minmax(0, 1fr);
    }

    .contact-grid {
      grid-template-columns: minmax(0, 1fr);
    }
  }

  @media (max-width: 600px) {
    .shell {
      padding: 0 1.1rem 3rem;
    }

    .nav {
      padding: 0 1.1rem;
    }

    footer {
      flex-direction: column;
    }
  }

  /* ========== LIGHT THEME READABILITY TWEAKS ========== */

  /* Tone down the glow in light mode so text isn‚Äôt washed out */
  :root[data-theme="light"] .ambient-orbit {
    opacity: 0.35;
    mix-blend-mode: normal;
  }

  /* Solid-ish header background in light mode */
  :root[data-theme="light"] header {
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.98),
      rgba(248, 250, 252, 0.96),
      rgba(248, 250, 252, 0.9)
    );
  }

  /* Hero + section text: force darker colors in light theme */
  :root[data-theme="light"] .hero-text,
  :root[data-theme="light"] .hero-scripture,
  :root[data-theme="light"] .section-subtitle,
  :root[data-theme="light"] .belief-intro {
    color: var(--text-muted);
  }

  :root[data-theme="light"] .hero-title {
    text-shadow: none;
    color: var(--text-main);
  }

  /* Put hero on a subtle white card in light mode for contrast */
  :root[data-theme="light"] .hero {
    background: rgba(255, 255, 255, 0.96);
    border-radius: 24px;
    box-shadow: 0 18px 45px rgba(15, 23, 42, 0.16);
    padding: 1.6rem 1.4rem;
  }

  @media (max-width: 880px) {
    :root[data-theme="light"] .hero {
      margin-top: 1.2rem;
    }
  }
</style>

</head>
<body>
  <div class="ambient-orbit" aria-hidden="true"></div>

  <header>
    <nav class="nav" aria-label="Main navigation">
      <div class="brand">
        <img src="images/theforgelogo.png" alt="The Forge logo" class="brand-logo" />
        <div>
          <div class="brand-text-main">The Forge</div>
        </div>
      </div>

      <div class="nav-links">
        <a href="theforge.html#overview">Overview</a>
        <a href="members.html" class="active">Members</a>
        <a href="prayerrequests.html">Prayer Requests</a>
      </div>

      <div class="nav-actions">
        <button id="accountButton" class="account-btn" type="button">
          <span class="icon">üë§</span>
          <span id="navAuthButtonLabel">Sign In</span>
        </button>

        <!-- Desktop theme toggle -->
        <button
          id="themeToggle"
          class="theme-toggle"
          type="button"
          aria-label="Toggle light or dark theme"
          aria-pressed="false"
        >
          <span class="theme-icon" aria-hidden="true">‚òÄÔ∏è</span>
          </button>

        <button
          class="hamburger"
          id="hamburger"
          type="button"
          aria-label="Toggle navigation"
          aria-expanded="false"
          aria-controls="mobileNav"
        >
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
      </div>
    </nav>

    <!-- Mobile nav overlay -->
    <div class="mobile-nav" id="mobileNav">
      <div class="mobile-nav-inner">
        <a href="theforge.html#overview">Overview</a>
        <a href="members.html">Members</a>
        <a href="prayerrequests.html">Prayer Requests</a>

        <div class="mobile-account-meta">
          <span id="navMobileUserLabel">Guest</span>
        </div>
        <button
          class="mobile-account-btn"
          id="mobileAccountButton"
          type="button"
        >
          <span id="navMobileAuthButtonLabel">Sign In / Create</span>
        </button>

        <!-- Mobile theme toggle at bottom -->
        <button
          class="mobile-theme-btn"
          id="themeToggleMobile"
          type="button"
          aria-label="Toggle light or dark theme"
          aria-pressed="false"
        >
          </button>
      </div>
    </div>
  </header>

  <!-- ACCESSIBILITY WIDGET -->
  <div
    class="accessibility-toolbar"
    role="region"
    aria-label="Accessibility options"
  >
    <!-- Launcher button (always visible) -->
    <button
      type="button"
      class="a11y-launcher"
      id="a11yLauncher"
      aria-label="Open accessibility tools"
      aria-expanded="false"
    >
      ‚ôø
    </button>

    <!-- Popover panel (opens above the button) -->
    <div
      class="accessibility-toolbar-inner"
      role="group"
      aria-label="Accessibility options"
    >
      <span class="accessibility-toolbar-label">Accessibility</span>
      <div class="a11y-button-group">
        <button
          type="button"
          class="a11y-btn"
          id="a11yFontDecrease"
          aria-label="Decrease text size"
        >
          <span class="icon">A‚àí</span>
          <span>Text</span>
        </button>
        <button
          type="button"
          class="a11y-btn"
          id="a11yFontIncrease"
          aria-label="Increase text size"
        >
          <span class="icon">A+</span>
          <span>Text</span>
        </button>
        <button
          type="button"
          class="a11y-btn"
          id="a11yFontReset"
          aria-label="Reset text size"
        >
          <span class="icon">‚Ü∫</span>
          <span>Reset</span>
        </button>
        <button
          type="button"
          class="a11y-btn"
          id="a11yContrast"
          aria-pressed="false"
          aria-label="Toggle high contrast mode"
        >
          <span class="icon">‚óë</span>
          <span>Contrast</span>
        </button>
        <button
          type="button"
          class="a11y-btn"
          id="a11yMotion"
          aria-pressed="false"
          aria-label="Toggle reduced motion"
        >
          <span class="icon">‚è∏</span>
          <span>Motion</span>
        </button>
      </div>
    </div>
  </div>

  <main class="shell">
    <section aria-labelledby="page-title">
      <div class="page-header-kicker">Brotherhood</div>
      <h1 id="page-title" class="page-title">Members of The Forge</h1>
      <p class="page-intro">
        This page lists the men who are part of The Forge community. This page is private and only visible to signed-in members.
      </p>

      <!-- Sign-in required notice (auth.js will hide this when signed in) -->
      <article class="card" id="membersSignInPrompt">
        <div class="card-inner">
          <div class="card-kicker">Private Area</div>
          <h2 class="card-title-main">Sign in to see the members of The Forge.</h2>
          <p class="card-text">
            To protect privacy and keep this space gated, only men with an active Forge account can view the
            member list. Use the <strong>Account</strong> button in the header to sign in or create an account
            with your invite code.
          </p>
        </div>
      </article>

      <!-- Auth-gated members layout -->
      <section id="membersWrapper" style="display: none;">
        <p id="membersStatus" class="members-status-text">
          Loading members‚Ä¶
        </p>

        <div class="members-layout">
          <!-- LEADERS -->
          <article class="card">
            <div class="card-inner">
              <div class="card-kicker">Leaders</div>
              <h2 class="card-title-main">Forge Leaders</h2>
              <p class="card-text">
                These are the men who help lead, steward, and guard the culture of The Forge ‚Äî owners,
                admins, and core leaders. They‚Äôre still brothers among brothers, but they carry added responsibility.
              </p>
              <div id="leadersGrid" class="member-grid">
                <!-- Populated by auth.js from Firestore profiles where role = owner/admin -->
              </div>
            </div>
          </article>

          <!-- MEMBERS -->
          <article class="card">
            <div class="card-inner">
              <div class="card-kicker">Members</div>
              <h2 class="card-title-main">Brothers in The Forge</h2>
              <p class="card-text">
                Every name here represents a real man walking through real battles. Pray for one another, encourage one
                another, and remember that you‚Äôre not alone in the fight.
              </p>
              <div id="membersGrid" class="member-grid">
                <!-- Populated by auth.js with all other profiles -->
              </div>
            </div>
          </article>
        </div>
      </section>
    </section>

    <footer>
      <div>¬© <span id="year"></span> The Forge ¬∑ Members</div>
      <div class="auth-status-text" id="authStatus">
        Not signed in
      </div>
    </footer>
  </main>

  <!-- AUTH MODAL (WIRED TO auth.js) -->
  <div
    class="auth-overlay"
    id="authOverlay"
    aria-modal="true"
    role="dialog"
    aria-hidden="true"
  >
    <div class="auth-card">
      <button
        type="button"
        class="auth-close-btn"
        id="authCloseBtn"
        aria-label="Close account window"
      >
        ‚úï
      </button>
      <div class="auth-card-inner">
        <div class="auth-card-header">
          <div class="auth-card-title">Forge Account</div>
          <div class="auth-card-sub">
            Invite-only access. Use the code you were given by the group owner.
          </div>
        </div>

        <div class="auth-toggle-row">
          <button
            type="button"
            class="auth-toggle-btn active"
            data-mode="signin"
          >
            Sign In
          </button>
          <button
            type="button"
            class="auth-toggle-btn"
            data-mode="signup"
          >
            Create Account
          </button>
        </div>

        <!-- Sign In (IDs match auth.js) -->
        <form id="loginForm" class="auth-form" autocomplete="on">
          <div class="auth-field">
            <label class="auth-label" for="loginEmail">Email</label>
            <input
              id="loginEmail"
              type="email"
              class="auth-input"
              autocomplete="email"
              required
            />
          </div>
          <div class="auth-field">
            <label class="auth-label" for="loginPassword">Password</label>
            <input
              id="loginPassword"
              type="password"
              class="auth-input"
              autocomplete="current-password"
              required
            />
          </div>
          <div
            id="forgotPasswordLink"
            class="forgot-password-link"
          >
            Forgot password?
          </div>
          <button type="submit" class="auth-btn">Sign In</button>
          <div class="auth-error" id="authErrorLogin"></div>
          <div class="auth-footnote">
            Already joined? Use the email and password you created.
          </div>
        </form>

        <!-- Sign Up (IDs match auth.js) -->
        <form id="signupForm" class="auth-form" style="display:none;" autocomplete="on">
          <div class="auth-field">
            <label class="auth-label" for="signupFirstName">First Name</label>
            <input
              id="signupFirstName"
              type="text"
              class="auth-input"
              autocomplete="given-name"
              required
            />
          </div>
          <div class="auth-field">
            <label class="auth-label" for="signupLastName">Last Name</label>
            <input
              id="signupLastName"
              type="text"
              class="auth-input"
              autocomplete="family-name"
              required
            />
          </div>

          <!-- Optional legacy display name field (used by auth.js fallback) -->
          <input id="signupName" type="hidden" />

          <div class="auth-field">
            <label class="auth-label" for="signupEmail">Email</label>
            <input
              id="signupEmail"
              type="email"
              class="auth-input"
              autocomplete="email"
              required
            />
          </div>
          <div class="auth-field">
            <label class="auth-label" for="signupPassword">Password</label>
            <input
              id="signupPassword"
              type="password"
              class="auth-input"
              autocomplete="new-password"
              required
            />
          </div>
          <div class="auth-field">
            <label class="auth-label" for="signupPassword2">Confirm Password</label>
            <input
              id="signupPassword2"
              type="password"
              class="auth-input"
              autocomplete="new-password"
              required
            />
          </div>
          <div class="auth-field">
            <label class="auth-label" for="signupInvite">Invite Code</label>
            <input
              id="signupInvite"
              type="text"
              class="auth-input"
              placeholder="Enter your invite code"
              required
            />
          </div>
          <button type="submit" class="auth-btn">Create Account</button>
          <div class="auth-error" id="authErrorSignup"></div>
          <div class="auth-footnote">
            Accounts are invite-only. If you don‚Äôt have a code, ask the group owner.
          </div>
        </form>

        <!-- Sign Out (only when logged in; wired by auth.js) -->
        <button
          type="button"
          id="signOutButton"
          class="auth-btn"
          style="margin-top: 0.75rem; display: none;"
        >
          Sign Out
        </button>
      </div>
    </div>
  </div>

  <script>
    // FOOTER YEAR
    document.getElementById('year').textContent = new Date().getFullYear();

    // MOBILE NAV TOGGLE (needed by auth.js when opening mobile account)
    (function () {
      const hamburger = document.getElementById('hamburger');
      const mobileNav = document.getElementById('mobileNav');

      if (!hamburger || !mobileNav) return;

      function closeNav() {
        mobileNav.classList.remove('open');
        hamburger.classList.remove('is-open');
        hamburger.setAttribute('aria-expanded', 'false');
      }

      function openNav() {
        mobileNav.classList.add('open');
        hamburger.classList.add('is-open');
        hamburger.setAttribute('aria-expanded', 'true');
      }

      hamburger.addEventListener('click', () => {
        if (mobileNav.classList.contains('open')) {
          closeNav();
        } else {
          openNav();
        }
      });

      mobileNav.querySelectorAll('a').forEach((link) => {
        link.addEventListener('click', () => {
          closeNav();
        });
      });

      // Expose to auth.js so it can close nav when opening account modal
      window.__forgeCloseMobileNav = closeNav;
    })();

    // THEME TOGGLE WITH PERSISTENCE (shared behavior with main site)
    (function () {
      const storageKey = 'forge_theme';
      const root = document.documentElement;

      const desktopBtn = document.getElementById('themeToggle');
      const mobileBtn = document.getElementById('themeToggleMobile');

      let currentTheme = 'light';

      function syncButtons() {
        const isLight = currentTheme === 'light';
        const icon = isLight ? '‚òÄÔ∏è' : 'üåô';
        const label = isLight ? 'Light' : 'Dark';

        if (desktopBtn) {
          const iconSpan = desktopBtn.querySelector('.theme-icon');
          const labelSpan = desktopBtn.querySelector('.theme-label');
          if (iconSpan) iconSpan.textContent = icon;
          if (labelSpan) labelSpan.textContent = label;
          desktopBtn.setAttribute('aria-pressed', !isLight ? 'true' : 'false');
        }

        if (mobileBtn) {
          const labelSpan = mobileBtn.querySelector('.mobile-theme-label');
          if (labelSpan) labelSpan.textContent = 'Theme: ' + label;
          mobileBtn.setAttribute('aria-pressed', !isLight ? 'true' : 'false');
        }
      }

      function setTheme(theme) {
        currentTheme = theme === 'dark' ? 'dark' : 'light';

        if (currentTheme === 'light') {
          root.setAttribute('data-theme', 'light');
        } else {
          root.removeAttribute('data-theme'); // base :root is dark
        }

        try {
          localStorage.setItem(storageKey, currentTheme);
        } catch (e) {
          // ignore storage errors
        }

        syncButtons();
      }

      // Initialize theme: prefer saved, otherwise default to light
      (function initTheme() {
        let saved = null;
        try {
          saved = localStorage.getItem(storageKey);
        } catch (e) {
          saved = null;
        }

        if (saved === 'light' || saved === 'dark') {
          setTheme(saved);
        } else {
          setTheme('light');
        }
      })();

      function toggleTheme() {
        setTheme(currentTheme === 'light' ? 'dark' : 'light');
      }

      if (desktopBtn) {
        desktopBtn.addEventListener('click', toggleTheme);
      }
      if (mobileBtn) {
        mobileBtn.addEventListener('click', toggleTheme);
      }
    })();

    // ACCESSIBILITY TOOLBAR LOGIC
    (function () {
      const htmlEl = document.documentElement;
      const bodyEl = document.body;

      const widget = document.querySelector('.accessibility-toolbar');
      const launcher = document.getElementById('a11yLauncher');
      const panel = document.querySelector('.accessibility-toolbar-inner');

      const btnFontInc = document.getElementById('a11yFontIncrease');
      const btnFontDec = document.getElementById('a11yFontDecrease');
      const btnFontReset = document.getElementById('a11yFontReset');
      const btnContrast = document.getElementById('a11yContrast');
      const btnMotion = document.getElementById('a11yMotion');

      let fontSizePercent = 100;

      function applyFontSize() {
        htmlEl.style.fontSize = fontSizePercent + '%';
      }

      function increaseFont() {
        if (fontSizePercent < 150) {
          fontSizePercent += 10;
          applyFontSize();
        }
      }

      function decreaseFont() {
        if (fontSizePercent > 80) {
          fontSizePercent -= 10;
          applyFontSize();
        }
      }

      function resetFont() {
        fontSizePercent = 100;
        applyFontSize();
      }

      function toggleContrast() {
        const isHigh = htmlEl.getAttribute('data-contrast') === 'high';
        if (isHigh) {
          htmlEl.removeAttribute('data-contrast');
          btnContrast.setAttribute('aria-pressed', 'false');
        } else {
          htmlEl.setAttribute('data-contrast', 'high');
          btnContrast.setAttribute('aria-pressed', 'true');
        }
      }

      function toggleMotion() {
        const isReduced = bodyEl.classList.contains('reduce-motion');
        if (isReduced) {
          bodyEl.classList.remove('reduce-motion');
          btnMotion.setAttribute('aria-pressed', 'false');
        } else {
          bodyEl.classList.add('reduce-motion');
          btnMotion.setAttribute('aria-pressed', 'true');
        }
      }

      // Wire up controls
      if (btnFontInc) btnFontInc.addEventListener('click', increaseFont);
      if (btnFontDec) btnFontDec.addEventListener('click', decreaseFont);
      if (btnFontReset) btnFontReset.addEventListener('click', resetFont);
      if (btnContrast) btnContrast.addEventListener('click', toggleContrast);
      if (btnMotion) btnMotion.addEventListener('click', toggleMotion);

      // Respect prefers-reduced-motion by default
      const prefersReducedMotion =
        window.matchMedia &&
        window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      if (prefersReducedMotion) {
        bodyEl.classList.add('reduce-motion');
        if (btnMotion) btnMotion.setAttribute('aria-pressed', 'true');
      }

      // Launcher open/close logic
      if (widget && launcher && panel) {
        function setOpen(isOpen) {
          widget.classList.toggle('open', isOpen);
          launcher.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
          if (isOpen) {
            const firstBtn = panel.querySelector('button');
            if (firstBtn) firstBtn.focus();
          }
        }

        launcher.addEventListener('click', () => {
          const isOpen = !widget.classList.contains('open');
          setOpen(isOpen);
        });

        // Close when clicking outside
        document.addEventListener('click', (e) => {
          if (!widget.classList.contains('open')) return;
          if (!widget.contains(e.target)) {
            setOpen(false);
          }
        });

        // Keyboard: Esc closes when open
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && widget.classList.contains('open')) {
            setOpen(false);
            launcher.focus();
          }
        });
      }
    })();
  </script>

  <!-- Firebase wiring & logic -->
  <script type="module" src="auth.js"></script>
</body>
</html>
